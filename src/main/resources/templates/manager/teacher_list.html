<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Teacher List</title>
    <style>
        /* Strict inline style for Teacher List */
        :root{--bg:#f5f7fb;--card:#fff;--text:#0f1724;--muted:#6b7280;--primary:#0b5ed7;--border:#e6eefc;--radius:8px}
        body{margin:0;background:linear-gradient(180deg,var(--bg),#eef6ff);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;color:var(--text);padding:28px}
        .container{max-width:1200px;margin:0 auto}
        .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
        .title{font-size:1.4rem;font-weight:700}
        .back{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:8px;background:#f0f6ff;color:var(--primary);text-decoration:none;border:1px solid var(--border);font-weight:700}
        .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:0 10px 30px rgba(8,20,50,0.04)}
        .stat-row{display:flex;gap:12px;margin-bottom:12px}
        .stat{flex:1;padding:12px;border-radius:8px;background:linear-gradient(180deg,#fff,#fbfdff);border:1px solid var(--border)}
        .num{font-weight:800;color:var(--primary);font-size:1.3rem}
        table{width:100%;border-collapse:collapse}
        thead th{background:var(--primary);color:#fff;padding:10px;text-align:left;font-weight:700}
        tbody td{padding:10px;border-bottom:1px solid #eef4ff}
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="title">Teacher List</div>
        <a th:href="@{/manager}" class="back">Back to Dashboard</a>
    </div>

    <div class="card">
        <div class="stat-row">
            <div class="stat"><div class="num" th:text="${teachers != null ? #lists.size(teachers) : 0}">0</div><div class="small" style="color:#6b7280">Total Teachers</div></div>
            <div class="stat"><div class="num" id="totalStudents">0</div><div class="small" style="color:#6b7280">Total Students</div></div>
            <div class="stat"><div class="num" id="activeTeachers">0</div><div class="small" style="color:#6b7280">Active Teachers</div></div>
        </div>

        <table>
            <thead><tr><th>Full Name</th><th>Teacher ID</th><th>Students</th><th>Last Attendance</th></tr></thead>
            <tbody>
            <tr th:each="t,stat : ${teachers}">
                <td th:text="${t.firstName + ' ' + t.lastName}">Name</td>
                <td th:text="${t.userId}">ID</td>
                <td th:text="${studentsCountMap != null && studentsCountMap.containsKey(t.userId) ? studentsCountMap[t.userId] : 0}">0</td>
                <td>--</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<script th:inline="javascript">
    /*<![CDATA[*/
    document.addEventListener('DOMContentLoaded', function(){
        let total=0,active=0;
        document.querySelectorAll('tbody tr').forEach(tr=>{
            const v = parseInt(tr.children[2].textContent.trim()) || 0;
            total += v; if(v>0) active++;
        });
        document.getElementById('totalStudents').innerText = total;
        document.getElementById('activeTeachers').innerText = active;
    });
    /*]]>*/
</script>
</body>
</html>